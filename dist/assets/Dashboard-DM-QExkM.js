import{f as L,e as q,r as le,h as se,i as Y,j as oe,k as P,s as ae,m as ne,o as pe,q as fe,t as ve,u as be,v as he,w as xe,x as me}from"./index-DfuF-eIo.js";import{C as V,r as re}from"./vendor-charts-Dqlli2kf.js";import{w as G,o as X,a as J,b as f,d as v,e,f as O,n as I,u as M,F as D,A as U,B as ie,t as _,k as z,D as ce,r as T,c as C,l as Q,E as ee,j as ge,m as N}from"./vendor-CnOKNHKp.js";import"./vendor-exceljs-B3-f5COA.js";import"./vendor-xlsx-BrcMyRkh.js";import"./vendor-datepicker-ChPokmFs.js";/* empty css                        */const te=["#60a5fa","#f87171","#34d399","#fbbf24","#a78bfa","#f472b6","#22d3ee","#fb923c","#818cf8","#a3e635","#2dd4bf","#e879f9","#94a3b8","#38bdf8","#fb7185","#c084fc"];function K(R){return te[R%te.length]}const ye={key:0,class:"chart-legend mb-2 flex flex-wrap gap-2 px-4 mt-2 max-h-24 overflow-y-auto anima-in fade-in duration-300"},we={class:"text-slate-300"},ke={class:"text-slate-500 text-[10px] ml-1"},_e={__name:"ChartSection",setup(R){V.register(...re);const i=T(null),x=T(null),h=T(null),b=C(()=>Y(L.value)),y=C(()=>se(L.value)),c=()=>{if(!i.value||!le.value.length)return;x.value&&x.value.destroy();const o=i.value.getContext("2d"),u={};y.value.forEach(r=>{u[r]={},b.value.forEach(a=>u[r][a]=0)}),L.value.forEach(r=>{u[r.project]&&u[r.project][r.date]!==void 0&&(u[r.project][r.date]+=r.units)});const S=y.value.map(r=>({name:r,total:Object.values(u[r]).reduce((a,p)=>a+p,0)})).sort((r,a)=>a.total-r.total).map((r,a)=>({label:r.name,data:b.value.map(p=>u[r.name][p]||0),backgroundColor:K(a),borderWidth:0,borderRadius:2,barPercentage:.6}));x.value=ce(new V(o,{type:"bar",data:{labels:b.value.map(r=>{const[a,p]=r.split("-");return new Date(parseInt(a),parseInt(p)-1).toLocaleString("en-US",{month:"short",year:"numeric"})}),datasets:S},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"#0f172a",borderColor:"#334155",borderWidth:1,filter:r=>r.raw>0,callbacks:{footer:r=>`Total: ${r.reduce((p,$)=>p+$.parsed.y,0).toFixed(2)} h`}}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{color:"#94a3b8"}},y:{stacked:!0,grid:{color:"#1e293b"},ticks:{color:"#94a3b8"},title:{display:!0,text:"Total Hours",color:"#64748b"}}}}}))};G(L,()=>{c()}),X(()=>{c();const o=h.value;if(!o)return;const u=m=>{const S=document.getElementById("scroll-content");S&&Math.abs(m.deltaY)>Math.abs(m.deltaX)&&(S.scrollTop+=m.deltaY,m.preventDefault())};o.addEventListener("wheel",u,{passive:!1})}),J(()=>{x.value&&x.value.destroy()});const n=()=>{if(i.value){const o=document.createElement("canvas");o.width=i.value.width,o.height=i.value.height;const u=o.getContext("2d");u.fillStyle="#0f172a",u.fillRect(0,0,o.width,o.height),u.drawImage(i.value,0,0);const m=document.createElement("a");m.download="Monthly_Project_Report.png",m.href=o.toDataURL("image/png",1),m.click()}},t=C(()=>{const o={};return L.value.forEach(u=>{o[u.project]||(o[u.project]=0),o[u.project]+=u.units}),y.value.map(u=>({name:u,total:o[u]||0})).sort((u,m)=>m.total-u.total)});return(o,u)=>(f(),v("div",{ref_key:"sectionRef",ref:h,id:"chart-section",class:I(["bg-slate-900 border-b border-slate-800 flex flex-col p-3 shrink-0 shadow-lg relative z-30 transition-all duration-300 ease-in-out",M(q)?"pb-1":""])},[e("div",{class:"flex justify-between items-start mb-2 shrink-0 px-4"},[u[1]||(u[1]=e("div",null,[e("h3",{class:"text-lg font-bold text-slate-100"},"Monthly Hours Trend"),e("p",{class:"text-xs text-slate-500"},[O("Stacked by "),e("span",{class:"font-bold text-blue-400"},"Project")])],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{onClick:n,class:"text-xs font-medium text-slate-400 hover:text-white flex items-center gap-1 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-700 hover:bg-slate-700 transition-colors"},[...u[0]||(u[0]=[e("i",{class:"ph ph-download-simple"},null,-1),O(" Save Image ",-1)])])])]),e("div",{class:I(["relative w-full transition-all duration-300 ease-in-out overflow-hidden px-4",M(q)?"h-24":"h-80"])},[e("canvas",{ref_key:"chartRef",ref:i},null,512)],2),M(q)?z("",!0):(f(),v("div",ye,[(f(!0),v(D,null,U(t.value,(m,S)=>(f(),v("div",{key:m.name,class:"legend-item flex items-center gap-1.5 px-2 py-1 rounded bg-slate-800/50 text-xs"},[e("div",{class:"w-3 h-3 rounded",style:ie({backgroundColor:M(K)(S)})},null,4),e("span",we,_(m.name),1),e("span",ke,"("+_(m.total.toFixed(1))+" h)",1)]))),128))]))],2))}},Ce={id:"project-section",class:"flex flex-col p-0 overflow-hidden shrink-0 table-section"},je={class:"px-8 pb-8"},Se={class:"bg-slate-900 rounded-xl border border-slate-800"},$e={class:"table-scroll-wrapper overflow-x-auto"},Ee={id:"project-table",class:"text-sm text-left border-collapse",style:{"min-width":"100%"}},Le={id:"project-thead",class:"text-xs text-slate-400 uppercase bg-slate-800"},Te={class:"px-4 py-3 font-medium text-slate-200 sticky left-0 bg-slate-900 z-10 border-r border-slate-800"},Re={class:"px-4 py-3 text-right font-bold text-blue-400"},De={__name:"ProjectSection",setup(R){const i=C(()=>Y(L.value)),x=C(()=>se(L.value)),h=C(()=>{const n={};return x.value.forEach(t=>{n[t]={total:0},i.value.forEach(o=>n[t][o]=0)}),L.value.forEach(t=>{n[t.project]&&(n[t.project][t.date]=(n[t.project][t.date]||0)+t.units,n[t.project].total+=t.units)}),n}),b=C(()=>[...x.value].sort((n,t)=>h.value[t].total-h.value[n].total)),y=n=>{const[t,o]=n.split("-");return new Date(parseInt(t),parseInt(o)-1).toLocaleString("en-US",{month:"short",year:"numeric"})},c=n=>{const t=n||0,o=t===0;return{text:t.toFixed(1)+"h",class:o?"text-slate-600":"text-slate-300"}};return(n,t)=>(f(),v("div",Ce,[t[2]||(t[2]=e("div",{class:"p-3 bg-slate-950 shrink-0"},[e("h3",{class:"text-xs font-bold text-slate-100 flex items-center gap-2 px-5"},[e("i",{class:"ph ph-briefcase text-blue-400"}),O(" Project Breakdown ")])],-1)),e("div",je,[e("div",Se,[e("div",$e,[e("table",Ee,[e("thead",Le,[e("tr",null,[t[0]||(t[0]=e("th",{class:"px-4 py-3 sticky left-0 bg-slate-800 z-20 border-b border-r border-slate-700 font-semibold"},"Project",-1)),(f(!0),v(D,null,U(i.value,o=>(f(),v("th",{key:o,class:"px-4 py-3 text-right border-b border-r border-slate-700 font-semibold whitespace-nowrap"},_(y(o)),1))),128)),t[1]||(t[1]=e("th",{class:"px-4 py-3 text-right font-bold text-blue-400 border-b border-slate-700"},"Total",-1))])]),e("tbody",null,[(f(!0),v(D,null,U(b.value,(o,u)=>(f(),v("tr",{key:o,class:I(["hover:bg-slate-800/50 transition-colors",u<b.value.length-1?"border-b border-slate-800":""])},[e("td",Te,_(o),1),(f(!0),v(D,null,U(i.value,m=>(f(),v("td",{key:m,class:I(["px-4 py-3 text-right border-r border-slate-800/50",c(h.value[o][m]).class])},_(c(h.value[o][m]).text),3))),128)),e("td",Re,_(h.value[o].total.toFixed(1))+"h",1)],2))),128))])])])])])]))}},Be={id:"developer-section",class:"flex flex-col p-0 overflow-hidden shrink-0 table-section"},Ie={class:"px-8 pb-8"},Ue={class:"bg-slate-900 rounded-xl border border-slate-800"},Fe={class:"table-scroll-wrapper overflow-x-auto"},Pe={id:"developer-table",class:"text-sm text-left border-collapse",style:{"min-width":"100%"}},Me={id:"developer-thead",class:"text-xs text-slate-400 uppercase bg-slate-800"},Oe={class:"px-4 py-3 font-medium text-slate-200 sticky left-0 bg-slate-900 z-10 border-r border-slate-800"},He={class:"px-4 py-3 text-right font-bold text-blue-400"},ze={__name:"DeveloperSection",setup(R){const i=C(()=>Y(L.value)),x=C(()=>oe(L.value)),h=C(()=>{const n={};return x.value.forEach(t=>{n[t]={total:0},i.value.forEach(o=>n[t][o]=0)}),L.value.forEach(t=>{n[t.user]&&(n[t.user][t.date]=(n[t.user][t.date]||0)+t.units,n[t.user].total+=t.units)}),n}),b=C(()=>[...x.value].sort((n,t)=>h.value[t].total-h.value[n].total)),y=n=>{const[t,o]=n.split("-");return new Date(parseInt(t),parseInt(o)-1).toLocaleString("en-US",{month:"short",year:"numeric"})},c=n=>{const t=n||0,o=t===0;return{text:t.toFixed(1)+"h",class:o?"text-slate-600":"text-slate-300"}};return(n,t)=>(f(),v("div",Be,[t[2]||(t[2]=e("div",{class:"p-3 bg-slate-950 shrink-0"},[e("h3",{class:"text-xs font-bold text-slate-100 flex items-center gap-2 px-5"},[e("i",{class:"ph ph-users text-blue-400"}),O(" Developer Breakdown ")])],-1)),e("div",Ie,[e("div",Ue,[e("div",Fe,[e("table",Pe,[e("thead",Me,[e("tr",null,[t[0]||(t[0]=e("th",{class:"px-4 py-3 sticky left-0 bg-slate-800 z-20 border-b border-r border-slate-700 font-semibold"},"Developer",-1)),(f(!0),v(D,null,U(i.value,o=>(f(),v("th",{key:o,class:"px-4 py-3 text-right border-b border-r border-slate-700 font-semibold whitespace-nowrap"},_(y(o)),1))),128)),t[1]||(t[1]=e("th",{class:"px-4 py-3 text-right font-bold text-blue-400 border-b border-slate-700"},"Total",-1))])]),e("tbody",null,[(f(!0),v(D,null,U(b.value,(o,u)=>(f(),v("tr",{key:o,class:I(["hover:bg-slate-800/50 transition-colors",u<b.value.length-1?"border-b border-slate-800":""])},[e("td",Oe,_(o),1),(f(!0),v(D,null,U(i.value,m=>(f(),v("td",{key:m,class:I(["px-4 py-3 text-right border-r border-slate-800/50",c(h.value[o][m]).class])},_(c(h.value[o][m]).text),3))),128)),e("td",He,_(h.value[o].total.toFixed(1))+"h",1)],2))),128))])])])])])]))}},Ae={id:"insights-section",class:"flex flex-col p-0 overflow-hidden shrink-0 table-section mb-10"},Ne={class:"px-8"},We={class:"bg-slate-900 rounded-xl border border-slate-800 p-6"},qe={class:"flex flex-wrap gap-4 mb-6"},Ve={class:"flex flex-col gap-1 w-full sm:w-64"},Ke={class:"relative"},Ye=["value"],Ze={class:"flex flex-col gap-1 w-full sm:w-64"},Ge={class:"relative"},Xe=["disabled"],Je=["value"],Qe={class:"relative w-full h-96"},et={key:0,class:"absolute inset-0 flex items-center justify-center text-slate-500 text-sm"},tt={key:0,class:"chart-legend mt-4 flex flex-wrap gap-2 max-h-24 overflow-y-auto"},lt={class:"text-slate-300"},st={class:"text-slate-500 text-[10px] ml-1"},ot={__name:"InsightsSection",setup(R){V.register(...re);const i=T(""),x=T("all"),h=T(null),b=T(null),y=C(()=>oe(L.value)),c=C(()=>{const r={};return y.value.forEach(a=>{r[a]=0,P.value[a]&&Object.values(P.value[a]).forEach(p=>{Object.values(p).forEach($=>r[a]+=$)})}),r}),n=C(()=>[...y.value].sort((r,a)=>c.value[a]-c.value[r])),t=C(()=>i.value&&P.value[i.value]?Object.keys(P.value[i.value]).sort():[]),o=C(()=>{const r={};return i.value&&P.value[i.value]&&Object.entries(P.value[i.value]).forEach(([a,p])=>{r[a]=Object.values(p).reduce(($,A)=>$+A,0)}),r}),u=()=>{if(!h.value||!i.value){b.value&&(b.value.destroy(),b.value=null);return}const r=P.value[i.value]||{},a=new Set;Object.values(r).forEach(s=>{Object.keys(s).forEach(l=>a.add(l))});const p=Array.from(a).sort();let $=x.value==="all"?Object.keys(r):[x.value];$=$.filter(s=>r[s]).map(s=>({name:s,total:Object.values(r[s]).reduce((l,d)=>l+d,0)})).sort((s,l)=>l.total-s.total).map(s=>s.name);const A=$.map((s,l)=>{const d=p.map(g=>r[s]?.[g]||0);return{label:s,data:d,backgroundColor:K(l),borderWidth:0,borderRadius:2,barPercentage:.6}});b.value&&b.value.destroy();const W=h.value.getContext("2d");b.value=ce(new V(W,{type:"bar",data:{labels:p.map(s=>{const[l,d]=s.split("-");return new Date(parseInt(l),parseInt(d)-1).toLocaleString("en-US",{month:"short",year:"numeric"})}),datasets:A},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"#0f172a",borderColor:"#334155",borderWidth:1,filter:s=>s.raw>0,callbacks:{footer:s=>`Total: ${s.reduce((d,g)=>d+g.parsed.y,0).toFixed(2)} h`}}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{color:"#94a3b8"}},y:{stacked:!0,grid:{color:"#1e293b"},ticks:{color:"#94a3b8"},title:{display:!0,text:"Hours Spent",color:"#64748b"}}}}}))},m=()=>{x.value="all"};G([i,x,P],()=>{requestAnimationFrame(u)}),X(()=>{u()}),J(()=>{b.value&&b.value.destroy()});const S=C(()=>i.value?(x.value==="all"?t.value:[x.value]).filter(a=>o.value[a]>0).sort((a,p)=>(o.value[p]||0)-(o.value[a]||0)):[]);return(r,a)=>(f(),v("div",Ae,[a[8]||(a[8]=e("div",{class:"p-3 bg-slate-950 shrink-0 flex justify-between items-center"},[e("h3",{class:"text-xs font-bold text-slate-100 flex items-center gap-2 px-5"},[e("i",{class:"ph ph-chart-bar text-blue-400"}),O(" Developer Project Insights ")])],-1)),e("div",Ne,[e("div",We,[e("div",qe,[e("div",Ve,[a[4]||(a[4]=e("label",{class:"text-xs text-slate-400 font-medium"},"Select Developer",-1)),e("div",Ke,[Q(e("select",{"onUpdate:modelValue":a[0]||(a[0]=p=>i.value=p),onChange:m,class:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500 appearance-none"},[a[2]||(a[2]=e("option",{value:""},"Select a Developer...",-1)),(f(!0),v(D,null,U(n.value,p=>(f(),v("option",{key:p,value:p},_(p)+" ("+_(c.value[p].toFixed(1))+" h) ",9,Ye))),128))],544),[[ee,i.value]]),a[3]||(a[3]=e("i",{class:"ph ph-caret-down absolute right-3 top-3 text-slate-400 pointer-events-none"},null,-1))])]),e("div",Ze,[a[7]||(a[7]=e("label",{class:"text-xs text-slate-400 font-medium"},"Filter by Project",-1)),e("div",Ge,[Q(e("select",{"onUpdate:modelValue":a[1]||(a[1]=p=>x.value=p),disabled:!i.value,class:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500 appearance-none disabled:opacity-50"},[a[5]||(a[5]=e("option",{value:"all"},"All Projects",-1)),(f(!0),v(D,null,U(t.value,p=>(f(),v("option",{key:p,value:p},_(p)+" ("+_((o.value[p]||0).toFixed(1))+" h) ",9,Je))),128))],8,Xe),[[ee,x.value]]),a[6]||(a[6]=e("i",{class:"ph ph-caret-down absolute right-3 top-3 text-slate-400 pointer-events-none"},null,-1))])])]),e("div",Qe,[e("canvas",{ref_key:"chartRef",ref:h},null,512),i.value?z("",!0):(f(),v("div",et," Select a developer to view insights "))]),i.value?(f(),v("div",tt,[(f(!0),v(D,null,U(S.value,(p,$)=>(f(),v("div",{key:p,class:"legend-item flex items-center gap-1.5 px-2 py-1 rounded bg-slate-800/50 text-xs"},[e("div",{class:"w-3 h-3 rounded",style:ie({backgroundColor:M(K)($)})},null,4),e("span",lt,_(p),1),e("span",st,"("+_((o.value[p]||0).toFixed(1))+" h)",1)]))),128))])):z("",!0)])])]))}},at={class:"fixed bottom-20 right-6 flex flex-col gap-2 z-50"},nt={__name:"FloatingNav",props:["activeSection"],emits:["scrollTo"],setup(R,{emit:i}){const x=i,h=y=>{const c=document.getElementById("scroll-content"),n=document.getElementById(y);if(y==="chart-section"){c&&(c.scrollTop=0);return}if(n&&c){const t=n.offsetTop;c.scrollTo({top:t,behavior:"smooth"})}x("scrollTo",y)},b=()=>{x("upload")};return(y,c)=>(f(),v("div",at,[e("button",{onClick:c[0]||(c[0]=n=>h("chart-section")),class:I(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="chart-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Top"},[...c[4]||(c[4]=[e("i",{class:"ph ph-arrow-up"},null,-1)])],2),e("button",{onClick:c[1]||(c[1]=n=>h("project-section")),class:I(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="project-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Projects"},[...c[5]||(c[5]=[e("i",{class:"ph ph-briefcase"},null,-1)])],2),e("button",{onClick:c[2]||(c[2]=n=>h("developer-section")),class:I(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="developer-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Developers"},[...c[6]||(c[6]=[e("i",{class:"ph ph-users"},null,-1)])],2),e("button",{onClick:c[3]||(c[3]=n=>h("insights-section")),class:I(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="insights-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Insights"},[...c[7]||(c[7]=[e("i",{class:"ph ph-chart-bar"},null,-1)])],2),M(ae)?(f(),v(D,{key:0},[c[9]||(c[9]=e("div",{class:"h-px bg-slate-800 my-1 mx-2"},null,-1)),e("button",{onClick:b,class:"nav-btn w-10 h-10 rounded-full border border-emerald-500/50 shadow-lg bg-slate-800 text-emerald-400 hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center group",title:"Upload to DO Spaces"},[...c[8]||(c[8]=[e("i",{class:"ph ph-cloud-arrow-up text-lg"},null,-1)])])],64)):z("",!0)]))}},rt={class:"w-full bg-slate-900 border-t border-slate-800 p-3 shrink-0 z-40 relative"},it={class:"max-w-7xl mx-auto flex flex-wrap items-center justify-center gap-6"},ct={class:"text-xs text-slate-400 font-medium"},dt={__name:"Footer",setup(R){const i=C(()=>Y(L.value)),x=()=>{navigator.clipboard.writeText(window.location.href)};return(h,b)=>(f(),v("footer",rt,[e("div",it,[e("span",ct," Source: "+_(M(ne)||"No File")+" | "+_(i.value.length)+" Months Displayed ",1),e("div",{class:"flex items-center gap-4"},[e("button",{onClick:x,class:"text-xs text-slate-400 hover:text-blue-400 flex items-center gap-1 transition-colors",title:"Copy URL from address bar"},[...b[0]||(b[0]=[e("i",{class:"ph ph-link"},null,-1),O(" Copy URL ",-1)])]),b[1]||(b[1]=e("div",{class:"w-px h-3 bg-slate-700 mx-1"},null,-1)),b[2]||(b[2]=e("a",{href:"https://github.com/darkcolonist/openproject-export-monthly-visualizer",target:"_blank",rel:"noopener noreferrer",class:"text-xs text-slate-400 hover:text-blue-400 flex items-center gap-1 transition-colors"},[e("i",{class:"ph ph-github-logo"}),O(" GitHub ")],-1))])])]))}},ut={class:"w-full h-full flex flex-col relative"},pt={key:0,class:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-500"},ft={class:"bg-slate-900 border border-emerald-500/30 rounded-2xl p-4 shadow-2xl flex items-center gap-4 max-w-lg"},vt={class:"flex-1 min-w-0"},bt=["href"],ht={class:"flex gap-2"},xt=["href"],jt={__name:"Dashboard",setup(R){const i=T(null),x=T("chart-section"),h=T(null),b=()=>{const s=i.value;if(!s)return;const l=s.scrollTop,d=["chart-section","project-section","developer-section","insights-section"];let g="chart-section";for(const w of d){const k=document.getElementById(w);if(k){const B=w==="chart-section"?0:k.offsetTop-100;l>=B&&(g=w)}}x.value=g,q.value=l>20,S()};let y=null,c=null,n=[];function t(s){const l=i.value,d=l.getBoundingClientRect();return s.getBoundingClientRect().top-d.top+l.scrollTop}function o(s,l,d){if(!s||!d||!l)return;const g=s.querySelectorAll("th"),w=d.querySelectorAll("th"),k=d.closest("table");k&&(k.style.tableLayout="fixed",k.style.width=l.scrollWidth+"px",k.style.minWidth=l.scrollWidth+"px"),g.forEach((B,j)=>{if(w[j]){w[j].style.boxSizing="border-box";const F=B.getBoundingClientRect().width+"px";w[j].style.width=F,w[j].style.minWidth=F,w[j].style.maxWidth=F}})}function u(s,l,d){const g=h.value;if(!g)return;const w=s.id,k=g.querySelector(".floating-header-inner");if(k){const H=d.getBoundingClientRect(),ue=g.getBoundingClientRect();k.style.marginLeft=H.left-ue.left+"px",k.style.width=H.width+"px",k.scrollLeft=d.scrollLeft}if(w===y)return;const B=s.cloneNode(!0),j=document.createElement("table");j.className=l.className,j.style.cssText=l.style.cssText,j.style.tableLayout="fixed",j.style.width=l.scrollWidth+"px",j.style.marginBottom="0",j.appendChild(B);const E=document.createElement("div");E.className="floating-header-inner";const F=d.getBoundingClientRect(),Z=g.getBoundingClientRect();E.style.marginLeft=F.left-Z.left+"px",E.style.width=F.width+"px",E.style.marginRight="0",E.style.padding="0",E.appendChild(j),g.innerHTML="",g.appendChild(E),g.classList.add("active"),E.scrollLeft=d.scrollLeft,requestAnimationFrame(()=>{o(s,l,B)});const de=()=>{const H=c;H&&Math.abs(H.scrollLeft-E.scrollLeft)>1&&(H.scrollLeft=E.scrollLeft)};E.addEventListener("scroll",de),y=w,c=d}function m(){const s=h.value;s&&s.classList.contains("active")&&(s.classList.remove("active"),s.innerHTML="",y=null,c=null)}function S(){const s=i.value;if(!s)return;const l=document.getElementById("project-thead"),d=document.getElementById("project-table"),g=document.getElementById("developer-thead"),w=document.getElementById("developer-table");if(!l||!d||!g||!w)return;const k=s.scrollTop,B=l.offsetHeight||0,j=t(d),E=j+d.offsetHeight,F=t(w),Z=F+w.offsetHeight;k>=j&&k<E-B?u(l,d,d.parentElement):k>=F&&k<Z-B?u(g,w,w.parentElement):m()}const r=s=>{const l=document.getElementById(s);if(l&&l.parentElement){const d=l.parentElement,g=h.value,w=()=>{const k=g?.querySelector(".floating-header-inner");k&&(s==="project-table"&&y==="project-thead"||s==="developer-table"&&y==="developer-thead")&&Math.abs(k.scrollLeft-d.scrollLeft)>1&&(k.scrollLeft=d.scrollLeft)};d.addEventListener("scroll",w),n.push({el:d,fn:w})}};X(()=>{const s=i.value;s&&s.addEventListener("scroll",b),window.addEventListener("resize",S),setTimeout(()=>{r("project-table"),r("developer-table"),S()},400)}),J(()=>{const s=i.value;s&&s.removeEventListener("scroll",b),window.removeEventListener("resize",S),n.forEach(({el:l,fn:d})=>l.removeEventListener("scroll",d))}),G(L,()=>{setTimeout(S,100)});const a=T(null),p=T(null),$=T(!1),A=async()=>{if(!ae.value){alert("Please configure DigitalOcean Spaces in Settings first.");return}try{$.value=!0;const s={accessKey:xe.value,secretKey:he.value,endpoint:be.value,bucket:ve.value,path:fe.value},l=await me(le.value,ne.value||"export",s);p.value=l;const d=window.location.origin+window.location.pathname,g=d.endsWith("/")?d:d+"/";a.value=`${g}#/dashboard/spaces/${encodeURIComponent(l)}`}catch(s){alert(s.message)}finally{$.value=!1}},W=s=>{navigator.clipboard.writeText(s).then(()=>{alert("URL copied to clipboard!")})};return(s,l)=>(f(),v("div",ut,[M(pe)?(f(),ge(_e,{key:0})):z("",!0),e("div",{id:"scroll-content",ref_key:"scrollRef",ref:i,class:"flex-1 overflow-y-auto relative bg-slate-950"},[e("div",{id:"floating-header",ref_key:"floatingHeaderRef",ref:h,class:"floating-sticky-header"},null,512),N(De),N(ze),N(ot),N(dt),N(nt,{activeSection:x.value,onUpload:A},null,8,["activeSection"]),a.value?(f(),v("div",pt,[e("div",ft,[l[8]||(l[8]=e("div",{class:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center shrink-0"},[e("i",{class:"ph ph-check text-emerald-400 text-xl"})],-1)),e("div",vt,[l[3]||(l[3]=e("p",{class:"text-sm font-bold text-slate-100 mb-0.5"},"Uploaded Successfully!",-1)),e("a",{href:a.value,target:"_blank",class:"text-[10px] text-slate-400 truncate block hover:text-emerald-400 transition-colors"},_(a.value),9,bt)]),e("div",ht,[e("button",{onClick:l[0]||(l[0]=d=>W(a.value)),class:"p-2 hover:bg-slate-800 rounded-lg text-emerald-400 transition-colors",title:"Copy Shareable Link"},[...l[4]||(l[4]=[e("i",{class:"ph ph-share-network ph-fill text-xl"},null,-1)])]),e("a",{href:a.value,target:"_blank",class:"p-2 hover:bg-slate-800 rounded-lg text-blue-400 transition-colors",title:"Open in new window"},[...l[5]||(l[5]=[e("i",{class:"ph ph-arrow-square-out text-xl"},null,-1)])],8,xt),e("button",{onClick:l[1]||(l[1]=d=>W(p.value)),class:"p-2 hover:bg-slate-800 rounded-lg text-blue-400 transition-colors",title:"Copy Direct Spaces Link (CSV)"},[...l[6]||(l[6]=[e("i",{class:"ph ph-file-csv text-xl"},null,-1)])]),e("button",{onClick:l[2]||(l[2]=d=>{a.value=null,p.value=null}),class:"p-2 hover:bg-slate-800 rounded-lg text-slate-500 hover:text-slate-300 transition-colors"},[...l[7]||(l[7]=[e("i",{class:"ph ph-x text-lg"},null,-1)])])])])])):z("",!0)],512)]))}};export{jt as default};
