import{f as L,r as te,e as le,h as K,i as se,j as F,s as oe,k as ae,m as ue,o as pe,q as fe,t as ve,u as be,v as he,w as xe}from"./index-B4mYfGs1.js";import{C as q,r as ne}from"./vendor-charts-Dqlli2kf.js";import{w as Z,o as G,a as X,b as f,d as v,e,f as M,F as D,A as I,B as re,u as N,t as _,D as ie,r as T,c as C,n as P,l as J,E as Q,k as A,j as me,m as z}from"./vendor-CnOKNHKp.js";import"./vendor-exceljs-B3-f5COA.js";import"./vendor-xlsx-BrcMyRkh.js";import"./vendor-datepicker-ChPokmFs.js";/* empty css                        */const ee=["#60a5fa","#f87171","#34d399","#fbbf24","#a78bfa","#f472b6","#22d3ee","#fb923c","#818cf8","#a3e635","#2dd4bf","#e879f9","#94a3b8","#38bdf8","#fb7185","#c084fc"];function V(R){return ee[R%ee.length]}const ge={class:"relative w-full h-80 transition-all overflow-hidden px-4"},ye={class:"chart-legend mb-2 flex flex-wrap gap-2 px-4 mt-2 max-h-24 overflow-y-auto"},we={class:"text-slate-300"},ke={class:"text-slate-500 text-[10px] ml-1"},_e={__name:"ChartSection",setup(R){q.register(...ne);const i=T(null),x=T(null),h=T(null),b=C(()=>K(L.value)),y=C(()=>le(L.value)),c=()=>{if(!i.value||!te.value.length)return;x.value&&x.value.destroy();const o=i.value.getContext("2d"),u={};y.value.forEach(r=>{u[r]={},b.value.forEach(a=>u[r][a]=0)}),L.value.forEach(r=>{u[r.project]&&u[r.project][r.date]!==void 0&&(u[r.project][r.date]+=r.units)});const S=y.value.map(r=>({name:r,total:Object.values(u[r]).reduce((a,p)=>a+p,0)})).sort((r,a)=>a.total-r.total).map((r,a)=>({label:r.name,data:b.value.map(p=>u[r.name][p]||0),backgroundColor:V(a),borderWidth:0,borderRadius:2,barPercentage:.6}));x.value=ie(new q(o,{type:"bar",data:{labels:b.value.map(r=>{const[a,p]=r.split("-");return new Date(parseInt(a),parseInt(p)-1).toLocaleString("en-US",{month:"short",year:"numeric"})}),datasets:S},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"#0f172a",borderColor:"#334155",borderWidth:1,filter:r=>r.raw>0,callbacks:{footer:r=>`Total: ${r.reduce((p,$)=>p+$.parsed.y,0).toFixed(2)} h`}}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{color:"#94a3b8"}},y:{stacked:!0,grid:{color:"#1e293b"},ticks:{color:"#94a3b8"},title:{display:!0,text:"Total Hours",color:"#64748b"}}}}}))};Z(L,()=>{c()}),G(()=>{c();const o=h.value;if(!o)return;const u=m=>{const S=document.getElementById("scroll-content");S&&Math.abs(m.deltaY)>Math.abs(m.deltaX)&&(S.scrollTop+=m.deltaY,m.preventDefault())};o.addEventListener("wheel",u,{passive:!1})}),X(()=>{x.value&&x.value.destroy()});const n=()=>{if(i.value){const o=document.createElement("canvas");o.width=i.value.width,o.height=i.value.height;const u=o.getContext("2d");u.fillStyle="#0f172a",u.fillRect(0,0,o.width,o.height),u.drawImage(i.value,0,0);const m=document.createElement("a");m.download="Monthly_Project_Report.png",m.href=o.toDataURL("image/png",1),m.click()}},t=C(()=>{const o={};return L.value.forEach(u=>{o[u.project]||(o[u.project]=0),o[u.project]+=u.units}),y.value.map(u=>({name:u,total:o[u]||0})).sort((u,m)=>m.total-u.total)});return(o,u)=>(f(),v("div",{ref_key:"sectionRef",ref:h,id:"chart-section",class:"bg-slate-900 border-b border-slate-800 flex flex-col p-3 shrink-0 shadow-lg relative z-30 transition-all"},[e("div",{class:"flex justify-between items-start mb-2 shrink-0 px-4"},[u[1]||(u[1]=e("div",null,[e("h3",{class:"text-lg font-bold text-slate-100"},"Monthly Hours Trend"),e("p",{class:"text-xs text-slate-500"},[M("Stacked by "),e("span",{class:"font-bold text-blue-400"},"Project")])],-1)),e("div",{class:"flex items-center gap-2"},[e("button",{onClick:n,class:"text-xs font-medium text-slate-400 hover:text-white flex items-center gap-1 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-700 hover:bg-slate-700 transition-colors"},[...u[0]||(u[0]=[e("i",{class:"ph ph-download-simple"},null,-1),M(" Save Image ",-1)])])])]),e("div",ge,[e("canvas",{ref_key:"chartRef",ref:i},null,512)]),e("div",ye,[(f(!0),v(D,null,I(t.value,(m,S)=>(f(),v("div",{key:m.name,class:"legend-item flex items-center gap-1.5 px-2 py-1 rounded bg-slate-800/50 text-xs"},[e("div",{class:"w-3 h-3 rounded",style:re({backgroundColor:N(V)(S)})},null,4),e("span",we,_(m.name),1),e("span",ke,"("+_(m.total.toFixed(1))+" h)",1)]))),128))])],512))}},Ce={id:"project-section",class:"flex flex-col p-0 overflow-hidden shrink-0 table-section"},je={class:"px-8 pb-8"},Se={class:"bg-slate-900 rounded-xl border border-slate-800"},$e={class:"table-scroll-wrapper overflow-x-auto"},Ee={id:"project-table",class:"text-sm text-left border-collapse",style:{"min-width":"100%"}},Le={id:"project-thead",class:"text-xs text-slate-400 uppercase bg-slate-800"},Te={class:"px-4 py-3 font-medium text-slate-200 sticky left-0 bg-slate-900 z-10 border-r border-slate-800"},Re={class:"px-4 py-3 text-right font-bold text-blue-400"},De={__name:"ProjectSection",setup(R){const i=C(()=>K(L.value)),x=C(()=>le(L.value)),h=C(()=>{const n={};return x.value.forEach(t=>{n[t]={total:0},i.value.forEach(o=>n[t][o]=0)}),L.value.forEach(t=>{n[t.project]&&(n[t.project][t.date]=(n[t.project][t.date]||0)+t.units,n[t.project].total+=t.units)}),n}),b=C(()=>[...x.value].sort((n,t)=>h.value[t].total-h.value[n].total)),y=n=>{const[t,o]=n.split("-");return new Date(parseInt(t),parseInt(o)-1).toLocaleString("en-US",{month:"short",year:"numeric"})},c=n=>{const t=n||0,o=t===0;return{text:t.toFixed(1)+"h",class:o?"text-slate-600":"text-slate-300"}};return(n,t)=>(f(),v("div",Ce,[t[2]||(t[2]=e("div",{class:"p-3 bg-slate-950 shrink-0"},[e("h3",{class:"text-xs font-bold text-slate-100 flex items-center gap-2 px-5"},[e("i",{class:"ph ph-briefcase text-blue-400"}),M(" Project Breakdown ")])],-1)),e("div",je,[e("div",Se,[e("div",$e,[e("table",Ee,[e("thead",Le,[e("tr",null,[t[0]||(t[0]=e("th",{class:"px-4 py-3 sticky left-0 bg-slate-800 z-20 border-b border-r border-slate-700 font-semibold"},"Project",-1)),(f(!0),v(D,null,I(i.value,o=>(f(),v("th",{key:o,class:"px-4 py-3 text-right border-b border-r border-slate-700 font-semibold whitespace-nowrap"},_(y(o)),1))),128)),t[1]||(t[1]=e("th",{class:"px-4 py-3 text-right font-bold text-blue-400 border-b border-slate-700"},"Total",-1))])]),e("tbody",null,[(f(!0),v(D,null,I(b.value,(o,u)=>(f(),v("tr",{key:o,class:P(["hover:bg-slate-800/50 transition-colors",u<b.value.length-1?"border-b border-slate-800":""])},[e("td",Te,_(o),1),(f(!0),v(D,null,I(i.value,m=>(f(),v("td",{key:m,class:P(["px-4 py-3 text-right border-r border-slate-800/50",c(h.value[o][m]).class])},_(c(h.value[o][m]).text),3))),128)),e("td",Re,_(h.value[o].total.toFixed(1))+"h",1)],2))),128))])])])])])]))}},Be={id:"developer-section",class:"flex flex-col p-0 overflow-hidden shrink-0 table-section"},Ie={class:"px-8 pb-8"},Ue={class:"bg-slate-900 rounded-xl border border-slate-800"},Fe={class:"table-scroll-wrapper overflow-x-auto"},Pe={id:"developer-table",class:"text-sm text-left border-collapse",style:{"min-width":"100%"}},Me={id:"developer-thead",class:"text-xs text-slate-400 uppercase bg-slate-800"},Oe={class:"px-4 py-3 font-medium text-slate-200 sticky left-0 bg-slate-900 z-10 border-r border-slate-800"},He={class:"px-4 py-3 text-right font-bold text-blue-400"},ze={__name:"DeveloperSection",setup(R){const i=C(()=>K(L.value)),x=C(()=>se(L.value)),h=C(()=>{const n={};return x.value.forEach(t=>{n[t]={total:0},i.value.forEach(o=>n[t][o]=0)}),L.value.forEach(t=>{n[t.user]&&(n[t.user][t.date]=(n[t.user][t.date]||0)+t.units,n[t.user].total+=t.units)}),n}),b=C(()=>[...x.value].sort((n,t)=>h.value[t].total-h.value[n].total)),y=n=>{const[t,o]=n.split("-");return new Date(parseInt(t),parseInt(o)-1).toLocaleString("en-US",{month:"short",year:"numeric"})},c=n=>{const t=n||0,o=t===0;return{text:t.toFixed(1)+"h",class:o?"text-slate-600":"text-slate-300"}};return(n,t)=>(f(),v("div",Be,[t[2]||(t[2]=e("div",{class:"p-3 bg-slate-950 shrink-0"},[e("h3",{class:"text-xs font-bold text-slate-100 flex items-center gap-2 px-5"},[e("i",{class:"ph ph-users text-blue-400"}),M(" Developer Breakdown ")])],-1)),e("div",Ie,[e("div",Ue,[e("div",Fe,[e("table",Pe,[e("thead",Me,[e("tr",null,[t[0]||(t[0]=e("th",{class:"px-4 py-3 sticky left-0 bg-slate-800 z-20 border-b border-r border-slate-700 font-semibold"},"Developer",-1)),(f(!0),v(D,null,I(i.value,o=>(f(),v("th",{key:o,class:"px-4 py-3 text-right border-b border-r border-slate-700 font-semibold whitespace-nowrap"},_(y(o)),1))),128)),t[1]||(t[1]=e("th",{class:"px-4 py-3 text-right font-bold text-blue-400 border-b border-slate-700"},"Total",-1))])]),e("tbody",null,[(f(!0),v(D,null,I(b.value,(o,u)=>(f(),v("tr",{key:o,class:P(["hover:bg-slate-800/50 transition-colors",u<b.value.length-1?"border-b border-slate-800":""])},[e("td",Oe,_(o),1),(f(!0),v(D,null,I(i.value,m=>(f(),v("td",{key:m,class:P(["px-4 py-3 text-right border-r border-slate-800/50",c(h.value[o][m]).class])},_(c(h.value[o][m]).text),3))),128)),e("td",He,_(h.value[o].total.toFixed(1))+"h",1)],2))),128))])])])])])]))}},Ae={id:"insights-section",class:"flex flex-col p-0 overflow-hidden shrink-0 table-section mb-10"},Ne={class:"px-8"},We={class:"bg-slate-900 rounded-xl border border-slate-800 p-6"},qe={class:"flex flex-wrap gap-4 mb-6"},Ve={class:"flex flex-col gap-1 w-full sm:w-64"},Ke={class:"relative"},Ye=["value"],Ze={class:"flex flex-col gap-1 w-full sm:w-64"},Ge={class:"relative"},Xe=["disabled"],Je=["value"],Qe={class:"relative w-full h-96"},et={key:0,class:"absolute inset-0 flex items-center justify-center text-slate-500 text-sm"},tt={key:0,class:"chart-legend mt-4 flex flex-wrap gap-2 max-h-24 overflow-y-auto"},lt={class:"text-slate-300"},st={class:"text-slate-500 text-[10px] ml-1"},ot={__name:"InsightsSection",setup(R){q.register(...ne);const i=T(""),x=T("all"),h=T(null),b=T(null),y=C(()=>se(L.value)),c=C(()=>{const r={};return y.value.forEach(a=>{r[a]=0,F.value[a]&&Object.values(F.value[a]).forEach(p=>{Object.values(p).forEach($=>r[a]+=$)})}),r}),n=C(()=>[...y.value].sort((r,a)=>c.value[a]-c.value[r])),t=C(()=>i.value&&F.value[i.value]?Object.keys(F.value[i.value]).sort():[]),o=C(()=>{const r={};return i.value&&F.value[i.value]&&Object.entries(F.value[i.value]).forEach(([a,p])=>{r[a]=Object.values(p).reduce(($,H)=>$+H,0)}),r}),u=()=>{if(!h.value||!i.value){b.value&&(b.value.destroy(),b.value=null);return}const r=F.value[i.value]||{},a=new Set;Object.values(r).forEach(l=>{Object.keys(l).forEach(s=>a.add(s))});const p=Array.from(a).sort();let $=x.value==="all"?Object.keys(r):[x.value];$=$.filter(l=>r[l]).map(l=>({name:l,total:Object.values(r[l]).reduce((s,d)=>s+d,0)})).sort((l,s)=>s.total-l.total).map(l=>l.name);const H=$.map((l,s)=>{const d=p.map(g=>r[l]?.[g]||0);return{label:l,data:d,backgroundColor:V(s),borderWidth:0,borderRadius:2,barPercentage:.6}});b.value&&b.value.destroy();const W=h.value.getContext("2d");b.value=ie(new q(W,{type:"bar",data:{labels:p.map(l=>{const[s,d]=l.split("-");return new Date(parseInt(s),parseInt(d)-1).toLocaleString("en-US",{month:"short",year:"numeric"})}),datasets:H},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"#0f172a",borderColor:"#334155",borderWidth:1,filter:l=>l.raw>0,callbacks:{footer:l=>`Total: ${l.reduce((d,g)=>d+g.parsed.y,0).toFixed(2)} h`}}},scales:{x:{stacked:!0,grid:{display:!1},ticks:{color:"#94a3b8"}},y:{stacked:!0,grid:{color:"#1e293b"},ticks:{color:"#94a3b8"},title:{display:!0,text:"Hours Spent",color:"#64748b"}}}}}))},m=()=>{x.value="all"};Z([i,x,F],()=>{requestAnimationFrame(u)}),G(()=>{u()}),X(()=>{b.value&&b.value.destroy()});const S=C(()=>i.value?(x.value==="all"?t.value:[x.value]).filter(a=>o.value[a]>0).sort((a,p)=>(o.value[p]||0)-(o.value[a]||0)):[]);return(r,a)=>(f(),v("div",Ae,[a[8]||(a[8]=e("div",{class:"p-3 bg-slate-950 shrink-0 flex justify-between items-center"},[e("h3",{class:"text-xs font-bold text-slate-100 flex items-center gap-2 px-5"},[e("i",{class:"ph ph-chart-bar text-blue-400"}),M(" Developer Project Insights ")])],-1)),e("div",Ne,[e("div",We,[e("div",qe,[e("div",Ve,[a[4]||(a[4]=e("label",{class:"text-xs text-slate-400 font-medium"},"Select Developer",-1)),e("div",Ke,[J(e("select",{"onUpdate:modelValue":a[0]||(a[0]=p=>i.value=p),onChange:m,class:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500 appearance-none"},[a[2]||(a[2]=e("option",{value:""},"Select a Developer...",-1)),(f(!0),v(D,null,I(n.value,p=>(f(),v("option",{key:p,value:p},_(p)+" ("+_(c.value[p].toFixed(1))+" h) ",9,Ye))),128))],544),[[Q,i.value]]),a[3]||(a[3]=e("i",{class:"ph ph-caret-down absolute right-3 top-3 text-slate-400 pointer-events-none"},null,-1))])]),e("div",Ze,[a[7]||(a[7]=e("label",{class:"text-xs text-slate-400 font-medium"},"Filter by Project",-1)),e("div",Ge,[J(e("select",{"onUpdate:modelValue":a[1]||(a[1]=p=>x.value=p),disabled:!i.value,class:"w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500 appearance-none disabled:opacity-50"},[a[5]||(a[5]=e("option",{value:"all"},"All Projects",-1)),(f(!0),v(D,null,I(t.value,p=>(f(),v("option",{key:p,value:p},_(p)+" ("+_((o.value[p]||0).toFixed(1))+" h) ",9,Je))),128))],8,Xe),[[Q,x.value]]),a[6]||(a[6]=e("i",{class:"ph ph-caret-down absolute right-3 top-3 text-slate-400 pointer-events-none"},null,-1))])])]),e("div",Qe,[e("canvas",{ref_key:"chartRef",ref:h},null,512),i.value?A("",!0):(f(),v("div",et," Select a developer to view insights "))]),i.value?(f(),v("div",tt,[(f(!0),v(D,null,I(S.value,(p,$)=>(f(),v("div",{key:p,class:"legend-item flex items-center gap-1.5 px-2 py-1 rounded bg-slate-800/50 text-xs"},[e("div",{class:"w-3 h-3 rounded",style:re({backgroundColor:N(V)($)})},null,4),e("span",lt,_(p),1),e("span",st,"("+_((o.value[p]||0).toFixed(1))+" h)",1)]))),128))])):A("",!0)])])]))}},at={class:"fixed bottom-20 right-6 flex flex-col gap-2 z-50"},nt={__name:"FloatingNav",props:["activeSection"],emits:["scrollTo"],setup(R,{emit:i}){const x=i,h=y=>{const c=document.getElementById("scroll-content"),n=document.getElementById(y);if(y==="chart-section"){c&&(c.scrollTop=0);return}if(n&&c){const t=n.offsetTop;c.scrollTo({top:t,behavior:"smooth"})}x("scrollTo",y)},b=()=>{x("upload")};return(y,c)=>(f(),v("div",at,[e("button",{onClick:c[0]||(c[0]=n=>h("chart-section")),class:P(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="chart-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Top"},[...c[4]||(c[4]=[e("i",{class:"ph ph-arrow-up"},null,-1)])],2),e("button",{onClick:c[1]||(c[1]=n=>h("project-section")),class:P(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="project-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Projects"},[...c[5]||(c[5]=[e("i",{class:"ph ph-briefcase"},null,-1)])],2),e("button",{onClick:c[2]||(c[2]=n=>h("developer-section")),class:P(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="developer-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Developers"},[...c[6]||(c[6]=[e("i",{class:"ph ph-users"},null,-1)])],2),e("button",{onClick:c[3]||(c[3]=n=>h("insights-section")),class:P(["nav-btn w-10 h-10 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center",R.activeSection==="insights-section"?"active bg-blue-600 text-white":"bg-slate-800 text-blue-400"]),title:"Insights"},[...c[7]||(c[7]=[e("i",{class:"ph ph-chart-bar"},null,-1)])],2),N(oe)?(f(),v(D,{key:0},[c[9]||(c[9]=e("div",{class:"h-px bg-slate-800 my-1 mx-2"},null,-1)),e("button",{onClick:b,class:"nav-btn w-10 h-10 rounded-full border border-emerald-500/50 shadow-lg bg-slate-800 text-emerald-400 hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center group",title:"Upload to DO Spaces"},[...c[8]||(c[8]=[e("i",{class:"ph ph-cloud-arrow-up text-lg"},null,-1)])])],64)):A("",!0)]))}},rt={class:"w-full bg-slate-900 border-t border-slate-800 p-3 shrink-0 z-40 relative"},it={class:"max-w-7xl mx-auto flex flex-wrap items-center justify-center gap-6"},ct={class:"text-xs text-slate-400 font-medium"},dt={__name:"Footer",setup(R){const i=C(()=>K(L.value)),x=()=>{navigator.clipboard.writeText(window.location.href)};return(h,b)=>(f(),v("footer",rt,[e("div",it,[e("span",ct," Source: "+_(N(ae)||"No File")+" | "+_(i.value.length)+" Months Displayed ",1),e("div",{class:"flex items-center gap-4"},[e("button",{onClick:x,class:"text-xs text-slate-400 hover:text-blue-400 flex items-center gap-1 transition-colors",title:"Copy URL from address bar"},[...b[0]||(b[0]=[e("i",{class:"ph ph-link"},null,-1),M(" Copy URL ",-1)])]),b[1]||(b[1]=e("div",{class:"w-px h-3 bg-slate-700 mx-1"},null,-1)),b[2]||(b[2]=e("a",{href:"https://github.com/darkcolonist/openproject-export-monthly-visualizer",target:"_blank",rel:"noopener noreferrer",class:"text-xs text-slate-400 hover:text-blue-400 flex items-center gap-1 transition-colors"},[e("i",{class:"ph ph-github-logo"}),M(" GitHub ")],-1))])])]))}},ut={class:"w-full h-full flex flex-col relative"},pt={key:0,class:"fixed bottom-8 left-1/2 -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-500"},ft={class:"bg-slate-900 border border-emerald-500/30 rounded-2xl p-4 shadow-2xl flex items-center gap-4 max-w-lg"},vt={class:"flex-1 min-w-0"},bt=["href"],ht={class:"flex gap-2"},xt=["href"],jt={__name:"Dashboard",setup(R){const i=T(null),x=T("chart-section"),h=T(null),b=()=>{const l=i.value;if(!l)return;const s=l.scrollTop,d=["chart-section","project-section","developer-section","insights-section"];let g="chart-section";for(const w of d){const k=document.getElementById(w);if(k){const B=w==="chart-section"?0:k.offsetTop-100;s>=B&&(g=w)}}x.value=g,S()};let y=null,c=null,n=[];function t(l){const s=i.value,d=s.getBoundingClientRect();return l.getBoundingClientRect().top-d.top+s.scrollTop}function o(l,s,d){if(!l||!d||!s)return;const g=l.querySelectorAll("th"),w=d.querySelectorAll("th"),k=d.closest("table");k&&(k.style.tableLayout="fixed",k.style.width=s.scrollWidth+"px",k.style.minWidth=s.scrollWidth+"px"),g.forEach((B,j)=>{if(w[j]){w[j].style.boxSizing="border-box";const U=B.getBoundingClientRect().width+"px";w[j].style.width=U,w[j].style.minWidth=U,w[j].style.maxWidth=U}})}function u(l,s,d){const g=h.value;if(!g)return;const w=l.id,k=g.querySelector(".floating-header-inner");if(k){const O=d.getBoundingClientRect(),de=g.getBoundingClientRect();k.style.marginLeft=O.left-de.left+"px",k.style.width=O.width+"px",k.scrollLeft=d.scrollLeft}if(w===y)return;const B=l.cloneNode(!0),j=document.createElement("table");j.className=s.className,j.style.cssText=s.style.cssText,j.style.tableLayout="fixed",j.style.width=s.scrollWidth+"px",j.style.marginBottom="0",j.appendChild(B);const E=document.createElement("div");E.className="floating-header-inner";const U=d.getBoundingClientRect(),Y=g.getBoundingClientRect();E.style.marginLeft=U.left-Y.left+"px",E.style.width=U.width+"px",E.style.marginRight="0",E.style.padding="0",E.appendChild(j),g.innerHTML="",g.appendChild(E),g.classList.add("active"),E.scrollLeft=d.scrollLeft,requestAnimationFrame(()=>{o(l,s,B)});const ce=()=>{const O=c;O&&Math.abs(O.scrollLeft-E.scrollLeft)>1&&(O.scrollLeft=E.scrollLeft)};E.addEventListener("scroll",ce),y=w,c=d}function m(){const l=h.value;l&&l.classList.contains("active")&&(l.classList.remove("active"),l.innerHTML="",y=null,c=null)}function S(){const l=i.value;if(!l)return;const s=document.getElementById("project-thead"),d=document.getElementById("project-table"),g=document.getElementById("developer-thead"),w=document.getElementById("developer-table");if(!s||!d||!g||!w)return;const k=l.scrollTop,B=s.offsetHeight||0,j=t(d),E=j+d.offsetHeight,U=t(w),Y=U+w.offsetHeight;k>=j&&k<E-B?u(s,d,d.parentElement):k>=U&&k<Y-B?u(g,w,w.parentElement):m()}const r=l=>{const s=document.getElementById(l);if(s&&s.parentElement){const d=s.parentElement,g=h.value,w=()=>{const k=g?.querySelector(".floating-header-inner");k&&(l==="project-table"&&y==="project-thead"||l==="developer-table"&&y==="developer-thead")&&Math.abs(k.scrollLeft-d.scrollLeft)>1&&(k.scrollLeft=d.scrollLeft)};d.addEventListener("scroll",w),n.push({el:d,fn:w})}};G(()=>{const l=i.value;l&&l.addEventListener("scroll",b),window.addEventListener("resize",S),setTimeout(()=>{r("project-table"),r("developer-table"),S()},400)}),X(()=>{const l=i.value;l&&l.removeEventListener("scroll",b),window.removeEventListener("resize",S),n.forEach(({el:s,fn:d})=>s.removeEventListener("scroll",d))}),Z(L,()=>{setTimeout(S,100)});const a=T(null),p=T(null),$=T(!1),H=async()=>{if(!oe.value){alert("Please configure DigitalOcean Spaces in Settings first.");return}try{$.value=!0;const l={accessKey:he.value,secretKey:be.value,endpoint:ve.value,bucket:fe.value,path:pe.value},s=await xe(te.value,ae.value||"export",l);p.value=s;const d=window.location.origin+window.location.pathname,g=d.endsWith("/")?d:d+"/";a.value=`${g}#/dashboard/spaces/${encodeURIComponent(s)}`}catch(l){alert(l.message)}finally{$.value=!1}},W=l=>{navigator.clipboard.writeText(l).then(()=>{alert("URL copied to clipboard!")})};return(l,s)=>(f(),v("div",ut,[N(ue)?(f(),me(_e,{key:0})):A("",!0),e("div",{id:"scroll-content",ref_key:"scrollRef",ref:i,class:"flex-1 overflow-y-auto relative bg-slate-950"},[e("div",{id:"floating-header",ref_key:"floatingHeaderRef",ref:h,class:"floating-sticky-header"},null,512),z(De),z(ze),z(ot),z(dt),z(nt,{activeSection:x.value,onUpload:H},null,8,["activeSection"]),a.value?(f(),v("div",pt,[e("div",ft,[s[8]||(s[8]=e("div",{class:"w-10 h-10 bg-emerald-500/20 rounded-full flex items-center justify-center shrink-0"},[e("i",{class:"ph ph-check text-emerald-400 text-xl"})],-1)),e("div",vt,[s[3]||(s[3]=e("p",{class:"text-sm font-bold text-slate-100 mb-0.5"},"Uploaded Successfully!",-1)),e("a",{href:a.value,target:"_blank",class:"text-[10px] text-slate-400 truncate block hover:text-emerald-400 transition-colors"},_(a.value),9,bt)]),e("div",ht,[e("button",{onClick:s[0]||(s[0]=d=>W(a.value)),class:"p-2 hover:bg-slate-800 rounded-lg text-emerald-400 transition-colors",title:"Copy Shareable Link"},[...s[4]||(s[4]=[e("i",{class:"ph ph-share-network ph-fill text-xl"},null,-1)])]),e("a",{href:a.value,target:"_blank",class:"p-2 hover:bg-slate-800 rounded-lg text-blue-400 transition-colors",title:"Open in new window"},[...s[5]||(s[5]=[e("i",{class:"ph ph-arrow-square-out text-xl"},null,-1)])],8,xt),e("button",{onClick:s[1]||(s[1]=d=>W(p.value)),class:"p-2 hover:bg-slate-800 rounded-lg text-blue-400 transition-colors",title:"Copy Direct Spaces Link (CSV)"},[...s[6]||(s[6]=[e("i",{class:"ph ph-file-csv text-xl"},null,-1)])]),e("button",{onClick:s[2]||(s[2]=d=>{a.value=null,p.value=null}),class:"p-2 hover:bg-slate-800 rounded-lg text-slate-500 hover:text-slate-300 transition-colors"},[...s[7]||(s[7]=[e("i",{class:"ph ph-x text-lg"},null,-1)])])])])])):A("",!0)],512)]))}};export{jt as default};
