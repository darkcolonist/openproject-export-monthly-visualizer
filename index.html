<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cost Report Visualizer</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- SheetJS (XLS/XLSX/CSV Parser) -->
    <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- Air Datepicker (Beautiful Month Range Picker) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/air-datepicker/air-datepicker.css">
    <script src="https://cdn.jsdelivr.net/npm/air-datepicker/air-datepicker.js"></script>

    <link rel="stylesheet" href="assets/css/app.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        phBlue: '#3b82f6', // Adjusted for Dark Mode (Lighter Blue)
                        phRed: '#ef4444',
                        darkBg: '#020617', // Slate 950
                        cardBg: '#0f172a', // Slate 900
                        borderDark: '#1e293b', // Slate 800
                    }
                }
            }
        }
    </script>
</head>

<body class="h-screen flex flex-col font-sans bg-slate-950 overflow-hidden">

    <!-- Header -->
    <header
        class="bg-slate-900 border-b border-slate-800 px-6 py-2 flex justify-between items-center shadow-sm shrink-0 z-40 relative">
        <div class="flex items-center gap-3">
            <div class="bg-slate-800 text-blue-400 p-1.5 rounded-lg border border-slate-700">
                <i class="ph ph-calendar-check text-xl"></i>
            </div>
            <div>
                <h1 class="font-bold text-base leading-tight text-slate-100">Monthly Project Report</h1>
                <p class="text-[10px] text-slate-400">Project Trends & Developer Breakdown</p>
            </div>
        </div>

        <!-- Date Filter Trigger (Hidden initially) -->
        <div id="header-date-filter" class="hidden md:flex items-center transition-all opacity-0">
            <button id="date-filter-trigger"
                class="flex items-center gap-3 bg-slate-800/50 hover:bg-slate-700/50 px-4 py-1.5 rounded-xl border border-slate-700/50 transition-all hover:scale-[1.02] active:scale-95 group">
                <div
                    class="bg-blue-500/10 text-blue-400 p-1.5 rounded-lg border border-blue-500/20 group-hover:bg-blue-500/20 transition-colors">
                    <i class="ph ph-calendar text-base"></i>
                </div>
                <div class="flex flex-col items-start">
                    <span class="text-[8px] uppercase tracking-widest text-slate-500 font-bold leading-none mb-1">Date
                        Range</span>
                    <span id="date-range-display" class="text-xs text-slate-200 font-medium">Showing everything</span>
                </div>
                <i class="ph ph-caret-down text-slate-500 ml-1 group-hover:text-slate-300 transition-colors"></i>
            </button>
        </div>

        <div class="flex items-center gap-4">
            <button onclick="toggleChart()" id="toggle-chart-btn"
                class="hidden text-[10px] font-medium text-slate-400 hover:text-white flex items-center gap-1 bg-slate-800 px-3 py-1 rounded-full border border-slate-700 hover:bg-slate-700 transition-colors">
                <i class="ph ph-caret-up"></i> Hide Graph
            </button>


            <!-- Split Button: New File and Settings -->
            <div class="flex items-center -space-x-px">
                <a href="./" id="header-new-btn"
                    class="flex items-center gap-2 px-4 h-[38px] bg-transparent hover:bg-blue-500/10 text-blue-400 text-xs font-bold rounded-l-xl transition-all border border-blue-500/50 hover:border-blue-400 active:scale-95">
                    <i class="ph ph-file-plus text-base"></i>
                    <span>New File</span>
                </a>

                <div class="relative">
                    <button id="settings-btn"
                        class="flex items-center justify-center px-3 h-[38px] bg-transparent hover:bg-blue-500/10 text-blue-400 text-xs font-bold rounded-r-xl transition-all border border-blue-500/50 hover:border-blue-400 border-l-transparent active:scale-95"
                        title="Configuration">
                        <i class="ph ph-dots-three text-lg"></i>
                    </button>
                    <div id="settings-menu"
                        class="hidden absolute right-0 mt-2 w-56 bg-slate-900 border border-slate-700 rounded-xl shadow-2xl overflow-hidden z-50 animate-in fade-in slide-in-from-top-1 duration-200">
                        <div class="p-2 flex flex-col gap-1">
                            <!-- Supabase Status Indicator -->
                            <div id="supabase-status"
                                class="hidden items-center gap-2 px-3 py-2 mb-1 rounded-lg bg-blue-500/10 border border-blue-500/20">
                                <div class="w-1.5 h-1.5 rounded-full bg-blue-400 animate-pulse"></div>
                                <span class="text-[10px] font-bold text-blue-400 uppercase tracking-wider">Supabase
                                    Connected</span>
                            </div>

                            <h4 class="px-3 py-1.5 text-[10px] font-bold text-slate-500 uppercase tracking-widest">Data
                                Source</h4>
                            <button id="connect-supabase-btn" onclick="App.showSupabaseModal()"
                                class="flex items-center gap-3 px-3 py-2 text-xs text-slate-300 hover:bg-slate-800 rounded-lg transition-colors group">
                                <i class="ph ph-database text-blue-400 group-hover:scale-110 transition-transform"></i>
                                <span>Connect Supabase</span>
                            </button>
                            <button id="sync-supabase-btn" onclick="App.supabase.sync()"
                                class="hidden flex items-center gap-3 px-3 py-2 text-xs text-blue-400 hover:bg-blue-500/10 rounded-lg transition-colors group">
                                <i class="ph ph-arrows-clockwise group-hover:animate-spin"></i>
                                <span>Sync Now</span>
                            </button>
                            <button id="disconnect-supabase-btn" onclick="App.supabase.disconnect()"
                                class="hidden flex items-center gap-3 px-3 py-2 text-xs text-red-400 hover:bg-red-500/10 rounded-lg transition-colors group">
                                <i class="ph ph-plugs-off group-hover:scale-110 transition-transform"></i>
                                <span>Disconnect Supabase</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 flex flex-col items-center p-0 relative overflow-hidden">

        <!-- 1. Upload View (Centered) -->
        <div id="upload-container"
            class="w-full h-full overflow-y-auto flex items-start justify-center transition-all duration-500 ease-in-out">
            <div class="w-full max-w-xl mt-20 p-6">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-slate-100 mb-2">Upload Cost Report</h2>
                    <p class="text-slate-400">Drag and drop your .xls or .csv file to see monthly trends.</p>
                </div>

                <div id="drop-zone"
                    class="bg-slate-900 border-2 border-dashed border-slate-700 rounded-2xl p-12 text-center transition-all cursor-pointer hover:border-blue-500 hover:bg-slate-800 hover:shadow-xl group">
                    <input type="file" id="file-input" class="hidden"
                        accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" />
                    <div
                        class="w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 border border-slate-700">
                        <i class="ph ph-calendar-plus text-4xl text-blue-400"></i>
                    </div>
                    <p class="text-lg font-semibold text-slate-200 mb-1">Click or Drag File</p>
                    <p class="text-sm text-slate-500">Supports Excel (.xls, .xlsx) & CSV</p>
                </div>

                <!-- Template Download Link -->
                <div class="mt-4 text-center">
                    <a href="assets/sample-template.csv" download="openproject-sample-template.csv"
                        class="inline-flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 transition-colors">
                        <i class="ph ph-download-simple"></i>
                        <span>Download Sample Template</span>
                    </a>
                    <p class="text-xs text-slate-500 mt-1">Your file must match this format: Date, User, Units, Project
                    </p>
                </div>

                <!-- Upload Page Footer -->
                <div class="mt-12 text-center pb-6">
                    <a href="https://github.com/darkcolonist/openproject-export-monthly-visualizer" target="_blank"
                        rel="noopener noreferrer"
                        class="inline-flex items-center gap-2 text-xs text-slate-500 hover:text-blue-400 transition-colors">
                        <i class="ph ph-github-logo text-base"></i>
                        <span>Open Source on GitHub</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- 2. Dashboard View (Hidden initially) -->
        <div id="dashboard-container"
            class="w-full h-full flex flex-col hidden opacity-0 transition-opacity duration-700">

            <!-- Fixed Chart Section -->
            <div id="chart-section"
                class="bg-slate-900 border-b border-slate-800 flex flex-col p-3 shrink-0 shadow-lg relative z-30 transition-all">
                <div class="flex justify-between items-start mb-2 shrink-0 px-4">
                    <div>
                        <h3 class="text-lg font-bold text-slate-100">Monthly Hours Trend</h3>
                        <p class="text-xs text-slate-500">Stacked by <span
                                class="font-bold text-blue-400">Project</span></p>
                    </div>
                    <div class="flex items-center gap-2">
                        <button onclick="downloadChart()"
                            class="text-xs font-medium text-slate-400 hover:text-white flex items-center gap-1 bg-slate-800 px-3 py-1.5 rounded-full border border-slate-700 hover:bg-slate-700 transition-colors">
                            <i class="ph ph-download-simple"></i> Save Image
                        </button>
                    </div>
                </div>
                <div id="chart-content" class="relative w-full h-80 transition-all overflow-hidden px-4">
                    <canvas id="myChart"></canvas>
                </div>
                <div id="project-legend" class="chart-legend mb-2"></div>
            </div>

            <!-- Scrollable Content Area -->
            <div id="scroll-content" class="flex-1 overflow-y-auto relative bg-slate-950">

                <!-- Floating Sticky Header -->
                <div id="floating-header" class="floating-sticky-header"></div>

                <!-- Middle Section: Project Breakdown -->
                <div id="project-section" class="flex flex-col p-0 overflow-hidden shrink-0 table-section">
                    <div class="p-3 bg-slate-950 shrink-0">
                        <h3 class="text-xs font-bold text-slate-100 flex items-center gap-2 px-5">
                            <i class="ph ph-briefcase text-blue-400"></i> Project Breakdown
                        </h3>
                    </div>
                    <div class="px-8 pb-8">
                        <div class="bg-slate-900 rounded-xl border border-slate-800">
                            <div class="table-scroll-wrapper">
                                <table id="project-table" class="text-sm text-left border-collapse"
                                    style="min-width: 100%;">
                                    <thead id="project-thead"
                                        class="text-xs text-slate-400 uppercase bg-slate-900 border-b border-slate-700">
                                        <tr id="project-table-header-row">
                                            <!-- Headers injected via JS -->
                                        </tr>
                                    </thead>
                                    <tbody id="project-table-body" class="divide-y divide-slate-800">
                                        <!-- Rows injected via JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom Section: Data Table -->
                <div id="developer-section" class="flex flex-col p-0 overflow-hidden shrink-0 table-section">
                    <div class="p-3 bg-slate-950 shrink-0">
                        <h3 class="text-xs font-bold text-slate-100 flex items-center gap-2 px-5">
                            <i class="ph ph-users text-blue-400"></i> Developer Breakdown
                        </h3>
                    </div>
                    <div class="px-8 pb-8">
                        <div class="bg-slate-900 rounded-xl border border-slate-800">
                            <div class="table-scroll-wrapper">
                                <table id="developer-table" class="text-sm text-left border-collapse"
                                    style="min-width: 100%;">
                                    <thead id="developer-thead"
                                        class="text-xs text-slate-400 uppercase bg-slate-900 border-b border-slate-700">
                                        <tr id="table-header-row">
                                            <!-- Headers injected via JS -->
                                        </tr>
                                    </thead>
                                    <tbody id="table-body" class="divide-y divide-slate-800">
                                        <!-- Rows injected via JS -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Developer Insights Section -->
                <div id="insights-section" class="flex flex-col p-0 overflow-hidden shrink-0 table-section mb-10">
                    <div class="p-3 bg-slate-950 shrink-0 flex justify-between items-center">
                        <h3 class="text-xs font-bold text-slate-100 flex items-center gap-2 px-5">
                            <i class="ph ph-chart-bar text-blue-400"></i> Developer Project Insights
                        </h3>
                    </div>

                    <div class="px-8">
                        <div class="bg-slate-900 rounded-xl border border-slate-800 p-6">

                            <!-- Controls -->
                            <div class="flex flex-wrap gap-4 mb-6">
                                <div class="flex flex-col gap-1 w-full sm:w-64">
                                    <label class="text-xs text-slate-400 font-medium">Select Developer</label>
                                    <div class="relative">
                                        <select id="insight-dev-select"
                                            class="w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500 appearance-none">
                                            <option value="">Select a Developer...</option>
                                        </select>
                                        <i
                                            class="ph ph-caret-down absolute right-3 top-3 text-slate-400 pointer-events-none"></i>
                                    </div>
                                </div>

                                <div class="flex flex-col gap-1 w-full sm:w-64">
                                    <label class="text-xs text-slate-400 font-medium">Filter by Project</label>
                                    <div class="relative">
                                        <select id="insight-proj-select"
                                            class="w-full bg-slate-800 border border-slate-700 text-slate-200 text-sm rounded-lg p-2.5 focus:ring-blue-500 focus:border-blue-500 appearance-none"
                                            disabled>
                                            <option value="all">All Projects</option>
                                        </select>
                                        <i
                                            class="ph ph-caret-down absolute right-3 top-3 text-slate-400 pointer-events-none"></i>
                                    </div>
                                </div>
                            </div>

                            <!-- Chart Container -->
                            <div class="relative w-full h-96">
                                <canvas id="developerChart"></canvas>
                                <div id="insight-placeholder"
                                    class="absolute inset-0 flex items-center justify-center text-slate-500 text-sm">
                                    Select a developer to view insights
                                </div>
                            </div>
                            <div id="developer-legend" class="chart-legend mt-4"></div>

                        </div>
                    </div>
                </div>

            </div>

            <!-- Footer Bar -->
            <footer class="w-full bg-slate-900 border-t border-slate-800 p-3 shrink-0 z-40 relative">
                <div class="max-w-7xl mx-auto flex flex-wrap items-center justify-center gap-6">
                    <span id="file-info" class="text-xs text-slate-400 font-medium"></span>

                    <div class="flex items-center gap-4">
                        <button id="copy-bookmark-btn" onclick="copyBookmarkUrl()"
                            class="text-xs text-slate-400 hover:text-blue-400 flex items-center gap-1 transition-colors"
                            title="Copy URL from address bar">
                            <i class="ph ph-link"></i> Copy URL
                        </button>

                        <div class="w-px h-3 bg-slate-700 mx-1"></div>

                        <a href="https://github.com/darkcolonist/openproject-export-monthly-visualizer" target="_blank"
                            rel="noopener noreferrer"
                            class="text-xs text-slate-400 hover:text-blue-400 flex items-center gap-1 transition-colors">
                            <i class="ph ph-github-logo"></i> GitHub
                        </a>
                    </div>
                </div>
            </footer>

            <!-- Floating Navigation -->
            <div id="floating-nav" class="fixed bottom-20 right-6 flex flex-col gap-2 z-50">
                <button onclick="scrollToSection('chart-section')" data-section="chart-section"
                    class="nav-btn w-10 h-10 bg-slate-800 text-blue-400 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center"
                    title="Top">
                    <i class="ph ph-arrow-up"></i>
                </button>
                <button onclick="scrollToSection('project-section')" data-section="project-section"
                    class="nav-btn w-10 h-10 bg-slate-800 text-blue-400 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center"
                    title="Projects">
                    <i class="ph ph-briefcase"></i>
                </button>
                <button onclick="scrollToSection('developer-section')" data-section="developer-section"
                    class="nav-btn w-10 h-10 bg-slate-800 text-blue-400 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center"
                    title="Developers">
                    <i class="ph ph-users"></i>
                </button>
                <button onclick="scrollToSection('insights-section')" data-section="insights-section"
                    class="nav-btn w-10 h-10 bg-slate-800 text-blue-400 rounded-full border border-slate-700 shadow-lg hover:bg-slate-700 hover:scale-110 transition-all flex items-center justify-center"
                    title="Insights">
                    <i class="ph ph-chart-bar"></i>
                </button>
            </div>
        </div>

    </main>

    <!-- Supabase Connection Modal -->
    <div id="supabase-modal" class="hidden fixed inset-0 z-[100] flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-slate-950/80 backdrop-blur-sm -z-10" onclick="App.hideSupabaseModal()"></div>
        <div
            class="bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200">
            <div class="p-6 border-b border-slate-800 flex justify-between items-center bg-slate-900/50">
                <h3 class="text-lg font-bold text-slate-100 flex items-center gap-2">
                    <i class="ph ph-database text-blue-400"></i>
                    Connect Supabase
                </h3>
                <button onclick="App.hideSupabaseModal()" class="text-slate-500 hover:text-slate-300">
                    <i class="ph ph-x text-xl"></i>
                </button>
            </div>
            <div class="p-6 space-y-5">
                <div class="space-y-2">
                    <label class="text-xs font-bold text-slate-400 uppercase tracking-widest">Base URL</label>
                    <input type="text" id="supabase-url" placeholder="https://xyz.supabase.co"
                        class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all">
                </div>
                <div class="space-y-2">
                    <label class="text-xs font-bold text-slate-400 uppercase tracking-widest">Anon / Public Key</label>
                    <input type="password" id="supabase-key" placeholder="ey4M3r57gPmdpGsstMcFB4UPh..."
                        class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-slate-200 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all">
                </div>

                <button id="test-supabase-connection-btn"
                    class="w-full py-2.5 bg-slate-800 hover:bg-slate-700 text-blue-400 font-bold rounded-xl border border-slate-700 transition-all active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed">
                    <i class="ph ph-plugs"></i>
                    Connect
                </button>

                <!-- Advanced settings hidden until connected -->
                <div id="supabase-config-advanced"
                    class="hidden space-y-5 animate-in fade-in slide-in-from-top-2 duration-300">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-400 uppercase tracking-widest flex justify-between">
                            <span>Fetch Date Range</span>
                            <span
                                class="relative group text-[10px] text-blue-400 font-medium normal-case flex items-center gap-1 cursor-help">
                                <i class="ph ph-info"></i>
                                <span id="supabase-row-limit-text">Max 1000 rows</span>
                                <div
                                    class="invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all duration-200 absolute bottom-full right-0 mb-2 w-64 p-3 bg-slate-900 border border-slate-700 rounded-xl shadow-2xl text-[11px] text-slate-300 font-normal leading-relaxed z-50 pointer-events-none">
                                    <p class="font-bold text-blue-400 mb-1 flex items-center gap-1">
                                        <i class="ph ph-info font-bold"></i>
                                        Row Limit Implication
                                    </p>
                                    Supabase fetch is limited to 1,000 rows to ensure stability. Data is sorted by date
                                    (newest first). If your date range exceeds this limit, only the most recent
                                    records
                                    will be loaded, which may lead to incomplete trends for the beginning of the period.
                                    <p class="mt-2 text-blue-400/80 italic">You can always return here to tweak the
                                        range if
                                        needed.</p>
                                    <div
                                        class="absolute top-full right-4 border-[6px] border-transparent border-t-slate-700">
                                    </div>
                                </div>
                            </span>
                        </label>
                        <button id="supabase-date-filter-btn"
                            class="w-full flex items-center justify-between gap-3 bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-slate-200 hover:bg-slate-750 transition-all group">
                            <div class="flex items-center gap-3">
                                <i class="ph ph-calendar text-blue-400 group-hover:scale-110 transition-transform"></i>
                                <span id="supabase-date-range-text" class="text-sm">Last 3 Months (Default)</span>
                            </div>
                            <i class="ph ph-caret-down text-slate-500"></i>
                        </button>
                        <!-- Row Count indicator -->
                        <div id="supabase-row-count" class="hidden px-1 flex items-center justify-between">
                            <span class="text-[10px] text-slate-500 font-medium">Data found:</span>
                            <span id="supabase-count-value" class="text-[10px] font-bold text-slate-300">0 rows</span>
                        </div>
                        <div id="supabase-date-picker-inline"
                            class="hidden mt-2 border border-slate-700 rounded-xl overflow-hidden bg-slate-800 shadow-inner">
                            <div id="supabase-air-datepicker" class="w-full"></div>
                            <div class="p-3 bg-slate-900/50 border-t border-slate-700 flex gap-2">
                                <button onclick="App.clearSupabaseDateRange()"
                                    class="flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider text-slate-500 hover:text-slate-300 transition-colors">Clear</button>
                                <button onclick="App.toggleSupabaseDatePicker()"
                                    class="flex-1 py-1.5 text-[10px] font-bold uppercase tracking-wider text-blue-400 hover:text-blue-300 transition-colors">Close</button>
                            </div>
                        </div>
                    </div>

                    <div id="supabase-warning" class="hidden bg-amber-500/10 border border-amber-500/20 rounded-xl p-4">
                        <div class="flex gap-3">
                            <i class="ph ph-warning-circle text-amber-400 text-lg shrink-0"></i>
                            <p class="text-[10px] text-amber-200 leading-relaxed italic">
                                Warning: Fetched 1000 rows. Some data might be omitted as the limit has been reached.
                                Consider narrowing your date range.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="bg-blue-500/5 border border-blue-500/10 rounded-xl p-4">
                    <p class="text-[10px] text-blue-300 leading-relaxed italic">
                        Credentials are stored only in your browser for 365 days. Data is fetched directly from Supabase
                        via REST API.
                    </p>
                </div>
            </div>
            <div class="p-6 bg-slate-800/50 border-t border-slate-800 flex flex-col gap-3">
                <button id="save-supabase-btn" onclick="App.saveSupabaseConfig()" disabled
                    class="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:grayscale disabled:cursor-not-allowed">
                    <i class="ph ph-check-circle text-lg"></i>
                    Save & Sync Data
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay"
        class="hidden fixed inset-0 z-[200] flex items-center justify-center bg-slate-950/50 backdrop-blur-[2px]">
        <div class="bg-slate-900 border border-slate-700 rounded-2xl p-6 shadow-2xl flex flex-col items-center gap-4">
            <div class="w-12 h-12 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin"></div>
            <p id="loading-text" class="text-sm font-medium text-slate-200">Processing...</p>
        </div>
    </div>

    <script src="assets/js/utils.js" defer></script>
    <script src="assets/js/state.js" defer></script>
    <script src="assets/js/dom.js" defer></script>
    <script src="assets/js/storage.js" defer></script>
    <script src="assets/js/tables.js" defer></script>
    <script src="assets/js/charts.js" defer></script>
    <script src="assets/js/scroll.js" defer></script>
    <script src="assets/js/date-picker.js" defer></script>
    <script src="assets/js/data-processing.js" defer></script>
    <script src="assets/js/supabase.js" defer></script>
    <script src="assets/js/ui.js" defer></script>
    <script src="assets/js/boot.js" defer></script>
</body>

</html>